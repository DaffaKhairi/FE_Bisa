<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/src/output.css" />
    <title>Document</title>
</head>

<body class="w-screen h-screen">
    <div class="w-full h-full relative">

        <!-- Kalo Mau Nambahin disini -->
        <div class="flex flex-col w-full h-full gap-6">
            <!-- Title -->
            <div class="p-4 text-xl text-white w-full bg-blue-600 text-center flex flex-row">
                <a href="/html/detailclass.html">
                    <img class="text-white" src="/src/white_cross.svg" alt="">
                </a>
                <h1 id="titleMaterial" class="w-full flex flex-col justify-center"></h1>
            </div>

            <div class="w-full px-10 flex flex-col justify-center">
                <div class="w-full flex flex-col bg-blue-600  rounded-xl p-6 bg-opacity-30 gap-6">
                    <p id="materialDescription" class="">test</p>

                    <div id="isiMaterial"></div>
                </div>
            </div>

            <div class="px-10 w-full h-full">
                <form action="" class="w-full h-full flex flex-col gap-4">
                    <label for="username" class="block text-sm/6 font-medium text-gray-900">Jawab :</label>
                    <div class="">
                        <textarea type="text" name="jawab" id="jawab" autocomplete="jawab"
                            placeholder="Enter Your Answer" required
                            class="block w-full h-64 rounded-md bg-white px-4 py-2 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6"></textarea>
                    </div>
                    <div class="w-full flex flex-row justify-end">

                        <button type="button" onclick="postLogin()"
                            class="w-10 rounded-md bg-blue-600 px-3 py-1.5 text-sm/6 font-semibold text-white shadow-sm ">
                            Done
                        </button>
                    </div>
                </form>

            </div>
        </div>


        <script src="/js/index.js"></script>
        <script>
            document.addEventListener("DOMContentLoaded", () => {
                const materialData = localStorage.getItem("selectedMaterial");
                const classData = localStorage.getItem("selectedClass");

                if (!materialData) {
                    console.error("No class data found.");
                    return;
                }

                const classDetails = JSON.parse(classData);
                console.log("Class Details:", classDetails);
                const materialDetails = JSON.parse(materialData);
                console.log("Material Details:", materialData);

                // Render data di halaman detail
                document.getElementById("jawab").addEventListener("click", () => {
                    fetchAnswer(classDetails.ID, materialData.ID);
                });

                document.getElementById("titleMaterial").textContent = materialDetails.Title;
                document.getElementById("materialDescription").textContent = materialDetails.URL;
                audio(materialDetails.URL)
            });



            function audio(audio) {
                document.getElementById("isiMaterial").innerHTML = `
                    <audio controls autoplay muted class="w-full ">
                        <source src=${audio} type="audio/mpeg">
                    </audio>
                `;

            }
        </script>
</body>

</html>